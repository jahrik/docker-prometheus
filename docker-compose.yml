version: '3'

services:

  prometheus:
    image: jahrik/arm-prometheus:arm32v7
    ports:
      - 9090:9090
    volumes:
      - /mnt/g1/prometheus:/prometheus
    networks:
      - monitor
      - elk
      - traefik
    dns:
      - bebop
    deploy:
      mode: replicated
      replicas: 1
      placement:
        constraints:
          - node.labels.arch == aarch64

networks:
  elk:
    driver: overlay
    external: true
  traefik:
    driver: overlay
    external: true
  monitor:
    name: monitor
    driver: overlay
